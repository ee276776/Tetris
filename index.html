<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿„ç¾…æ–¯æ–¹å¡Š - ç·šä¸ŠéŠæˆ² | Tetris Online Game</title>
    <meta name="description" content="ç¶“å…¸ä¿„ç¾…æ–¯æ–¹å¡ŠéŠæˆ²ï¼Œæ”¯æ´ç·šä¸Šé«˜åˆ†æ¦œã€ç”¨æˆ¶è¨»å†Šç™»å…¥ï¼Œå®Œå…¨å…è²»éŠç©ï¼">
    <meta name="keywords" content="ä¿„ç¾…æ–¯æ–¹å¡Š,Tetris,ç·šä¸ŠéŠæˆ²,é«˜åˆ†æ¦œ,å…è²»éŠæˆ²">
    <link rel="stylesheet" href="styles.css">
    <!-- ç°¡æ˜“ favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§©</text></svg>">
</head>

<body>
    <!-- ç™»å…¥/è¨»å†Šæ¨¡æ…‹æ¡†ï¼ˆéš±è—ï¼Œæ”¹ç‚ºç›´æ¥åµŒå…¥å·¦å´é¢æ¿ï¼‰ -->
    <div id="authModal" class="auth-modal" style="display: none;">
        <div class="auth-content">
            <h2 id="authTitle">ç™»å…¥éŠæˆ²</h2>
            <form id="authForm">
                <div class="form-group">
                    <label for="modalEmail">é›»å­éƒµä»¶ï¼š</label>
                    <input type="email" id="modalEmail" required placeholder="è«‹è¼¸å…¥é›»å­éƒµä»¶">
                </div>
                <div class="form-group">
                    <label for="modalPassword">å¯†ç¢¼ï¼š</label>
                    <input type="password" id="modalPassword" required placeholder="è«‹è¼¸å…¥å¯†ç¢¼">
                </div>
                <button type="submit" id="authSubmitBtn" class="auth-btn">ç™»å…¥</button>
                <button type="button" id="switchAuthBtn" class="auth-btn secondary">æ²’æœ‰å¸³è™Ÿï¼Ÿè¨»å†Š</button>
            </form>
            <div id="modalAuthError" class="error-message"></div>
        </div>
    </div>    <div class="game-container">
        <!-- å·¦å´é¢æ¿ -->
        <div class="left-panel">
            <!-- ç™»å…¥å€åŸŸ -->
            <div class="auth-panel">
                <div class="auth-header">
                    <h3>ğŸ® éŠæˆ²ç™»å…¥</h3>
                </div>
                
                <!-- ç™»å…¥è¡¨å–® -->
                <div class="auth-form" id="authFormSection">
                    <div class="input-group">
                        <input type="email" id="email" placeholder="é›»å­éƒµä»¶" required>
                    </div>
                    <div class="input-group">
                        <input type="password" id="password" placeholder="å¯†ç¢¼" required>
                    </div>
                    <div class="auth-buttons">
                        <button class="auth-btn primary" id="loginBtn">ç™»å…¥</button>
                        <button class="auth-btn secondary" id="registerBtn">è¨»å†Š</button>
                    </div>
                    <div id="authError" class="error-message"></div>
                </div>
                
                <!-- ç”¨æˆ¶ä¿¡æ¯ -->
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="welcome-message">
                        <span class="user-icon">ğŸ‘¤</span>
                        <span id="userEmail"></span>
                    </div>
                    <button class="auth-btn logout" id="logoutBtn">ç™»å‡º</button>
                </div>
            </div>
            
            <!-- éŠæˆ²æ§åˆ¶å€åŸŸ -->
            <div class="game-controls-panel">
                <h3>ğŸ¯ éŠæˆ²æ§åˆ¶</h3>
                <div class="control-buttons">
                    <button class="control-btn start" id="startBtn">é–‹å§‹éŠæˆ²</button>
                    <button class="control-btn pause" id="pauseBtn" disabled>æš«åœ</button>
                    <button class="control-btn restart" id="restartBtn">é‡æ–°é–‹å§‹</button>
                </div>
            </div>
            
            <!-- æ“ä½œèªªæ˜ -->
            <div class="controls-panel">
                <h3>âŒ¨ï¸ æ“ä½œèªªæ˜</h3>
                <div class="control-list">
                    <div class="control-item">â† â†’ï¼šå·¦å³ç§»å‹•</div>
                    <div class="control-item">â†‘ï¼šæ—‹è½‰æ–¹å¡Š</div>
                    <div class="control-item">â†“ï¼šåŠ é€Ÿä¸‹å¢œ</div>
                    <div class="control-item">ç©ºç™½éµï¼šç›´æ¥ä¸‹å¢œ</div>
                    <div class="control-item">Shiftï¼šä¿å­˜/äº¤æ›æ–¹å¡Š</div>
                </div>
            </div>
        </div>

        <!-- ä¸­å¤®éŠæˆ²å€åŸŸ -->
        <div class="game-area">
            <canvas id="gameCanvas" width="300" height="600"></canvas>
        </div>

        <!-- å³å´é¢æ¿ -->
        <div class="right-panel">
            <!-- éŠæˆ²ä¿¡æ¯ -->
            <div class="game-info-panel">
                <h2>ğŸ® ä¿„ç¾…æ–¯æ–¹å¡Š</h2>
                <div class="score-section">
                    <div class="score-item">
                        <span class="label">åˆ†æ•¸ï¼š</span>
                        <span id="score">0</span>
                    </div>
                    <div class="score-item">
                        <span class="label">ç­‰ç´šï¼š</span>
                        <span id="level">1</span>
                    </div>
                    <div class="score-item">
                        <span class="label">è¡Œæ•¸ï¼š</span>
                        <span id="lines">0</span>
                    </div>
                </div>
            </div>

            <!-- ä¿å­˜æ–¹å¡Š -->
            <div class="hold-section">
                <h3>ğŸ’¾ ä¿å­˜æ–¹å¡Š</h3>
                <canvas id="holdCanvas" width="80" height="80"></canvas>
            </div>

            <!-- ä¸‹ä¸€å€‹æ–¹å¡Š -->
            <div class="next-section">
                <h3>ğŸ”® ä¸‹ä¸€å€‹</h3>
                <canvas id="nextCanvas" width="80" height="80"></canvas>
            </div>

            <!-- å€‹äººå‰10é«˜åˆ† -->
            <div class="high-scores-section">
                <h3>ğŸ† å€‹äººå‰10é«˜åˆ†</h3>
                <div id="highScoresList" class="high-scores-list">
                    <div class="no-scores">è«‹å…ˆç™»å…¥æŸ¥çœ‹è¨˜éŒ„</div>
                </div>
            </div>

            <!-- å…¨çƒå‰10æ’è¡Œæ¦œ -->
            <div class="global-scores-section">
                <h3>ğŸŒ å…¨çƒæ’è¡Œæ¦œ</h3>
                <div id="globalScoresList" class="global-scores-list">
                    <div class="no-scores">è«‹å…ˆç™»å…¥æŸ¥çœ‹æ’è¡Œæ¦œ</div>
                </div>
            </div>
        </div>
    </div>

    <div id="gameOver" class="game-over-modal" style="display: none;">
        <div class="modal-content">
            <h2>éŠæˆ²çµæŸ</h2>
            <p>æœ€çµ‚åˆ†æ•¸: <span id="finalScore">0</span></p>
            <div id="newHighScore" class="new-high-score" style="display: none;">
                ğŸ‰ æ–°çš„å€‹äººæœ€é«˜åˆ†ï¼ğŸ‰
            </div>
            <button id="playAgainBtn" class="game-btn">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        // Firebase é…ç½®
        const firebaseConfig = {
            apiKey: "AIzaSyDqqVf5_tOj3PGKan-6eRzpxoutCPOjzCU",
            authDomain: "tetris-1a620.firebaseapp.com",
            projectId: "tetris-1a620",
            storageBucket: "tetris-1a620.firebasestorage.app",
            messagingSenderId: "870301381409",
            appId: "1:870301381409:web:421b54953a5788a1fa4460",
            measurementId: "G-6KZBGN7HM2"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // å°‡ Firebase å¯¦ä¾‹æ›è¼‰åˆ° window ä»¥ä¾¿å…¶ä»–è…³æœ¬ä½¿ç”¨
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseAuth = auth;
    </script>

    <script src="firebase-auth.js"></script>
    <script src="game.js"></script>
</body>

</html>